<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kiá»ƒm tra vá»‹ trÃ­ â€“ Nhiá»u Ä‘á»‹a Ä‘iá»ƒm</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <style>
    :root { --bg:#0b132b; --card:#1c2541; --pri:#5bc0be; --txt:#e0e6f1; --muted:#a3b3c2; }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--bg);color:var(--txt)}
    header{padding:24px 20px;text-align:center;border-bottom:1px solid #223056}
    h1{margin:0 0 4px;font-size:24px}
    h2{margin:0;font-size:14px;color:var(--muted);font-weight:500}
    main{display:grid;grid-template-columns:360px 1fr;gap:16px;padding:16px}
    @media (max-width: 900px){ main{grid-template-columns:1fr} }
    .panel{background:var(--card);border:1px solid #223056;border-radius:12px;overflow:hidden}
    .panel .body{padding:16px}
    label{display:block;font-weight:600;margin:8px 0 6px}
    input,textarea,select,button{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #2a3a66;background:#11182d;color:var(--txt)}
    button{background:var(--pri);color:#0b132b;border:none;font-weight:700;cursor:pointer}
    button:hover{filter:brightness(1.05)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .list{max-height:280px;overflow:auto;margin-top:10px;border:1px dashed #2a3a66;border-radius:10px}
    .list-item{display:flex;align-items:center;gap:8px;padding:10px 12px;border-bottom:1px dashed #2a3a66}
    .badge{background:#0e1a36;color:var(--pri);padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid #2a3a66}
    #map{height:520px}
    .muted{color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <header>
    <h1>Kiá»ƒm tra vá»‹ trÃ­</h1>
    <h2>ThÃªm nhiá»u Ä‘á»‹a Ä‘iá»ƒm vÃ  xem trÃªn báº£n Ä‘á»“</h2>
  </header>
  <main>
    <section class="panel">
      <div class="body">
        <form id="location-form">
          <label for="name">TÃªn Ä‘á»‹a Ä‘iá»ƒm</label>
          <input id="name" name="name" placeholder="VD: VÄƒn phÃ²ng Tam Ká»³" required />

          <div class="row">
            <div>
              <label for="lat">VÄ© Ä‘á»™ (lat)</label>
              <input id="lat" name="lat" type="number" step="any" placeholder="15.573" required />
            </div>
            <div>
              <label for="lng">Kinh Ä‘á»™ (lng)</label>
              <input id="lng" name="lng" type="number" step="any" placeholder="108.474" required />
            </div>
          </div>

          <label for="desc">Ghi chÃº (tuá»³ chá»n)</label>
          <textarea id="desc" name="desc" rows="2" placeholder="ThÃ´ng tin thÃªmâ€¦"></textarea>

          <div class="row" style="margin-top:10px">
            <button type="submit">â• ThÃªm Ä‘á»‹a Ä‘iá»ƒm</button>
            <button type="button" id="use-geo">ğŸ“ Láº¥y toáº¡ Ä‘á»™ hiá»‡n táº¡i</button>
          </div>
          <p class="muted" style="margin-top:8px">Máº¹o: Báº¡n cÃ³ thá»ƒ nháº­p trá»±c tiáº¿p toáº¡ Ä‘á»™ lat/lng hoáº·c báº¥m vÃ o báº£n Ä‘á»“ Ä‘á»ƒ láº¥y toáº¡ Ä‘á»™.</p>
        </form>

        <div class="list" id="location-list" aria-live="polite"></div>
      </div>
    </section>

    <section class="panel">
      <div id="map"></div>
    </section>
  </main>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  >
    addLocation('Äá»‹a Ä‘iá»ƒm má»›i', 16.04140620523989, 108.21016802158452, 'ÄÆ°á»£c thÃªm theo yÃªu cáº§u');

</script>
  <script>
    // Khá»Ÿi táº¡o báº£n Ä‘á»“
    const map = L.map('map').setView([15.573, 108.474], 12); // Tam Ká»³ máº·c Ä‘á»‹nh
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    const markers = [];

    function addLocation(name, lat, lng, desc=''){
      const m = L.marker([lat, lng]).addTo(map).bindPopup(`<strong>${name}</strong><br/>${desc || ''}`);
      markers.push(m);
      // Cáº­p nháº­t danh sÃ¡ch
      const list = document.getElementById('location-list');
      const item = document.createElement('div');
      item.className = 'list-item';
      item.innerHTML = `<span class="badge">${markers.length}</span><div><div><strong>${name}</strong></div><div class="muted">${lat.toFixed(6)}, ${lng.toFixed(6)}</div>${desc?`<div>${desc}</div>`:''}</div>`;
      list.appendChild(item);
      // Äiá»u hÆ°á»›ng báº£n Ä‘á»“
      map.setView([lat, lng], Math.max(map.getZoom(), 13));
    }

    // Cho phÃ©p báº¥m vÃ o báº£n Ä‘á»“ Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘iá»n lat/lng
    map.on('click', (e)=>{
      document.getElementById('lat').value = e.latlng.lat.toFixed(6);
      document.getElementById('lng').value = e.latlng.lng.toFixed(6);
    });

    // Láº¥y toáº¡ Ä‘á»™ hiá»‡n táº¡i
    document.getElementById('use-geo').addEventListener('click', ()=>{
      if (!navigator.geolocation){
        alert('TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ Geolocation');
        return;
      }
      navigator.geolocation.getCurrentPosition(pos=>{
        const {latitude, longitude} = pos.coords;
        document.getElementById('lat').value = latitude.toFixed(6);
        document.getElementById('lng').value = longitude.toFixed(6);
        map.setView([latitude, longitude], 15);
      }, err => alert('KhÃ´ng láº¥y Ä‘Æ°á»£c vá»‹ trÃ­: '+ err.message));
    });

    // Xá»­ lÃ½ form thÃªm Ä‘á»‹a Ä‘iá»ƒm
    document.getElementById('location-form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const lat = parseFloat(document.getElementById('lat').value);
      const lng = parseFloat(document.getElementById('lng').value);
      const desc = document.getElementById('desc').value.trim();
      if (!name || isNaN(lat) || isNaN(lng)){
        alert('Vui lÃ²ng nháº­p tÃªn vÃ  toáº¡ Ä‘á»™ há»£p lá»‡.');
        return;
      }
      addLocation(name, lat, lng, desc);
      e.target.reset();
    });

    // (Tuá»³ chá»n) Khá»Ÿi táº¡o sáºµn 1 Ä‘á»‹a Ä‘iá»ƒm tá»« file gá»‘c náº¿u cáº§n
    // VÃ­ dá»¥: VÄƒn phÃ²ng Tam Ká»³
    addLocation('VÄƒn phÃ²ng Tam Ká»³', 15.573000, 108.474000, 'Äá»‹a Ä‘iá»ƒm máº·c Ä‘á»‹nh');
  
    addLocation('Äá»‹a Ä‘iá»ƒm má»›i', 16.04140620523989, 108.21016802158452, 'ÄÆ°á»£c thÃªm theo yÃªu cáº§u');

</script>
</body>
</html>